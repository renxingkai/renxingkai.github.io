<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="英文文本预处理代码"><meta name="keywords" content="文本预处理"><meta name="author" content="CinKate"><meta name="copyright" content="CinKate"><title>英文文本预处理代码 | CinKate's Blogs</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?b77222dd6b9929f160b8a04fc8705337";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '3.9.0'
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://imgsrc.baidu.com/forum/w%3D580/sign=f8de0e9b3e87e9504217f3642039531b/1c3bd133c895d143e395e57b77f082025baf0726.jpg"></div><div class="author-info__name text-center">CinKate</div><div class="author-info__description text-center">长笛一声人倚楼~</div><div class="follow-button"><a href="https://github.com/renxingkai">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">27</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">22</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">11</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://p17.qhimg.com/d/_open360/fengjing0403/21.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">CinKate's Blogs</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">英文文本预处理代码</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-05-17</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/自然语言处理/">自然语言处理</a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">3.1k</span><span class="post-meta__separator">|</span><span>Reading time: 18 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>贴一段在做Kaggle QIQC时别人开源的kernel英语文本预处理代码，在做英文nlp任务时还是很有用的~</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import os</span><br><span class="line">import re</span><br><span class="line">import gc</span><br><span class="line">import string</span><br><span class="line">import unicodedata</span><br><span class="line">import operator</span><br><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">from tqdm import tqdm</span><br><span class="line">tqdm.pandas()</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">utils</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def load_data(datapath):</span><br><span class="line">    print(&quot;loading data ......&quot;)</span><br><span class="line">    df_train = pd.read_csv(os.path.join(datapath, &quot;train.csv&quot;))</span><br><span class="line">    df_test = pd.read_csv(os.path.join(datapath, &quot;test.csv&quot;))</span><br><span class="line">    print(&quot;train data with shape : &quot;, df_train.shape)</span><br><span class="line">    print(&quot;test data with shape : &quot;, df_test.shape)</span><br><span class="line">    return df_train, df_test</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">nlp</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def clean_misspell(text):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    misspell list (quora vs. glove)</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    misspell_to_sub = &#123;</span><br><span class="line">        &apos;Terroristan&apos;: &apos;terrorist Pakistan&apos;,</span><br><span class="line">        &apos;terroristan&apos;: &apos;terrorist Pakistan&apos;,</span><br><span class="line">        &apos;BIMARU&apos;: &apos;Bihar, Madhya Pradesh, Rajasthan, Uttar Pradesh&apos;,</span><br><span class="line">        &apos;Hinduphobic&apos;: &apos;Hindu phobic&apos;,</span><br><span class="line">        &apos;hinduphobic&apos;: &apos;Hindu phobic&apos;,</span><br><span class="line">        &apos;Hinduphobia&apos;: &apos;Hindu phobic&apos;,</span><br><span class="line">        &apos;hinduphobia&apos;: &apos;Hindu phobic&apos;,</span><br><span class="line">        &apos;Babchenko&apos;: &apos;Arkady Arkadyevich Babchenko faked death&apos;,</span><br><span class="line">        &apos;Boshniaks&apos;: &apos;Bosniaks&apos;,</span><br><span class="line">        &apos;Dravidanadu&apos;: &apos;Dravida Nadu&apos;,</span><br><span class="line">        &apos;mysoginists&apos;: &apos;misogynists&apos;,</span><br><span class="line">        &apos;MGTOWS&apos;: &apos;Men Going Their Own Way&apos;,</span><br><span class="line">        &apos;mongloid&apos;: &apos;Mongoloid&apos;,</span><br><span class="line">        &apos;unsincere&apos;: &apos;insincere&apos;,</span><br><span class="line">        &apos;meninism&apos;: &apos;male feminism&apos;,</span><br><span class="line">        &apos;jewplicate&apos;: &apos;jewish replicate&apos;,</span><br><span class="line">        &apos;unoin&apos;: &apos;Union&apos;,</span><br><span class="line">        &apos;daesh&apos;: &apos;Islamic State of Iraq and the Levant&apos;,</span><br><span class="line">        &apos;Kalergi&apos;: &apos;Coudenhove-Kalergi&apos;,</span><br><span class="line">        &apos;Bhakts&apos;: &apos;Bhakt&apos;,</span><br><span class="line">        &apos;bhakts&apos;: &apos;Bhakt&apos;,</span><br><span class="line">        &apos;Tambrahms&apos;: &apos;Tamil Brahmin&apos;,</span><br><span class="line">        &apos;Pahul&apos;: &apos;Amrit Sanskar&apos;,</span><br><span class="line">        &apos;SJW&apos;: &apos;social justice warrior&apos;,</span><br><span class="line">        &apos;SJWs&apos;: &apos;social justice warrior&apos;,</span><br><span class="line">        &apos; incel&apos;: &apos; involuntary celibates&apos;,</span><br><span class="line">        &apos; incels&apos;: &apos; involuntary celibates&apos;,</span><br><span class="line">        &apos;emiratis&apos;: &apos;Emiratis&apos;,</span><br><span class="line">        &apos;weatern&apos;: &apos;western&apos;,</span><br><span class="line">        &apos;westernise&apos;: &apos;westernize&apos;,</span><br><span class="line">        &apos;Pizzagate&apos;: &apos;Pizzagate conspiracy theory&apos;,</span><br><span class="line">        &apos;naïve&apos;: &apos;naive&apos;,</span><br><span class="line">        &apos;Skripal&apos;: &apos;Sergei Skripal&apos;,</span><br><span class="line">        &apos;Remainers&apos;: &apos;British remainer&apos;,</span><br><span class="line">        &apos;remainers&apos;: &apos;British remainer&apos;,</span><br><span class="line">        &apos;bremainer&apos;: &apos;British remainer&apos;,</span><br><span class="line">        &apos;antibrahmin&apos;: &apos;anti Brahminism&apos;,</span><br><span class="line">        &apos;HYPSM&apos;: &apos; Harvard, Yale, Princeton, Stanford, MIT&apos;,</span><br><span class="line">        &apos;HYPS&apos;: &apos; Harvard, Yale, Princeton, Stanford&apos;,</span><br><span class="line">        &apos;kompromat&apos;: &apos;compromising material&apos;,</span><br><span class="line">        &apos;Tharki&apos;: &apos;pervert&apos;,</span><br><span class="line">        &apos;tharki&apos;: &apos;pervert&apos;,</span><br><span class="line">        &apos;mastuburate&apos;: &apos;masturbate&apos;,</span><br><span class="line">        &apos;Zoë&apos;: &apos;Zoe&apos;,</span><br><span class="line">        &apos;indans&apos;: &apos;Indian&apos;,</span><br><span class="line">        &apos; xender&apos;: &apos; gender&apos;,</span><br><span class="line">        &apos;Naxali &apos;: &apos;Naxalite &apos;,</span><br><span class="line">        &apos;Naxalities&apos;: &apos;Naxalites&apos;,</span><br><span class="line">        &apos;Bathla&apos;: &apos;Namit Bathla&apos;,</span><br><span class="line">        &apos;Mewani&apos;: &apos;Indian politician Jignesh Mevani&apos;,</span><br><span class="line">        &apos;clichéd&apos;: &apos;cliche&apos;,</span><br><span class="line">        &apos;cliché&apos;: &apos;cliche&apos;,</span><br><span class="line">        &apos;clichés&apos;: &apos;cliche&apos;,</span><br><span class="line">        &apos;Wjy&apos;: &apos;Why&apos;,</span><br><span class="line">        &apos;Fadnavis&apos;: &apos;Indian politician Devendra Fadnavis&apos;,</span><br><span class="line">        &apos;Awadesh&apos;: &apos;Indian engineer Awdhesh Singh&apos;,</span><br><span class="line">        &apos;Awdhesh&apos;: &apos;Indian engineer Awdhesh Singh&apos;,</span><br><span class="line">        &apos;Khalistanis&apos;: &apos;Sikh separatist movement&apos;,</span><br><span class="line">        &apos;madheshi&apos;: &apos;Madheshi&apos;,</span><br><span class="line">        &apos;BNBR&apos;: &apos;Be Nice, Be Respectful&apos;,</span><br><span class="line">        &apos;Bolsonaro&apos;: &apos;Jair Bolsonaro&apos;,</span><br><span class="line">        &apos;XXXTentacion&apos;: &apos;Tentacion&apos;,</span><br><span class="line">        &apos;Padmavat&apos;: &apos;Indian Movie Padmaavat&apos;,</span><br><span class="line">        &apos;Žižek&apos;: &apos;Slovenian philosopher Slavoj Žižek&apos;,</span><br><span class="line">        &apos;Adityanath&apos;: &apos;Indian monk Yogi Adityanath&apos;,</span><br><span class="line">        &apos;Brexit&apos;: &apos;British Exit&apos;,</span><br><span class="line">        &apos;Brexiter&apos;: &apos;British Exit supporter&apos;,</span><br><span class="line">        &apos;Brexiters&apos;: &apos;British Exit supporters&apos;,</span><br><span class="line">        &apos;Brexiteer&apos;: &apos;British Exit supporter&apos;,</span><br><span class="line">        &apos;Brexiteers&apos;: &apos;British Exit supporters&apos;,</span><br><span class="line">        &apos;Brexiting&apos;: &apos;British Exit&apos;,</span><br><span class="line">        &apos;Brexitosis&apos;: &apos;British Exit disorder&apos;,</span><br><span class="line">        &apos;brexit&apos;: &apos;British Exit&apos;,</span><br><span class="line">        &apos;brexiters&apos;: &apos;British Exit supporters&apos;,</span><br><span class="line">        &apos;jallikattu&apos;: &apos;Jallikattu&apos;,</span><br><span class="line">        &apos;fortnite&apos;: &apos;Fortnite &apos;,</span><br><span class="line">        &apos;Swachh&apos;: &apos;Swachh Bharat mission campaign &apos;,</span><br><span class="line">        &apos;Quorans&apos;: &apos;Quoran&apos;,</span><br><span class="line">        &apos;Qoura &apos;: &apos;Quora &apos;,</span><br><span class="line">        &apos;quoras&apos;: &apos;Quora&apos;,</span><br><span class="line">        &apos;Quroa&apos;: &apos;Quora&apos;,</span><br><span class="line">        &apos;QUORA&apos;: &apos;Quora&apos;,</span><br><span class="line">        &apos;narcissit&apos;: &apos;narcissist&apos;,</span><br><span class="line">        # extra in sample</span><br><span class="line">        &apos;Doklam&apos;: &apos;Tibet&apos;,</span><br><span class="line">        &apos;Drumpf &apos;: &apos;Donald Trump fool &apos;,</span><br><span class="line">        &apos;Drumpfs&apos;: &apos;Donald Trump fools&apos;,</span><br><span class="line">        &apos;Strzok&apos;: &apos;Hillary Clinton scandal&apos;,</span><br><span class="line">        &apos;rohingya&apos;: &apos;Rohingya &apos;,</span><br><span class="line">        &apos;wumao &apos;: &apos;cheap Chinese stuff&apos;,</span><br><span class="line">        &apos;wumaos&apos;: &apos;cheap Chinese stuff&apos;,</span><br><span class="line">        &apos;Sanghis&apos;: &apos;Sanghi&apos;,</span><br><span class="line">        &apos;Tamilans&apos;: &apos;Tamils&apos;,</span><br><span class="line">        &apos;biharis&apos;: &apos;Biharis&apos;,</span><br><span class="line">        &apos;Rejuvalex&apos;: &apos;hair growth formula&apos;,</span><br><span class="line">        &apos;Feku&apos;: &apos;The Man of India &apos;,</span><br><span class="line">        &apos;deplorables&apos;: &apos;deplorable&apos;,</span><br><span class="line">        &apos;muhajirs&apos;: &apos;Muslim immigrant&apos;,</span><br><span class="line">        &apos;Gujratis&apos;: &apos;Gujarati&apos;,</span><br><span class="line">        &apos;Chutiya&apos;: &apos;Tibet people &apos;,</span><br><span class="line">        &apos;Chutiyas&apos;: &apos;Tibet people &apos;,</span><br><span class="line">        &apos;thighing&apos;: &apos;masturbate&apos;,</span><br><span class="line">        &apos;卐&apos;: &apos;Nazi Germany&apos;,</span><br><span class="line">        &apos;Pribumi&apos;: &apos;Native Indonesian&apos;,</span><br><span class="line">        &apos;Gurmehar&apos;: &apos;Gurmehar Kaur Indian student activist&apos;,</span><br><span class="line">        &apos;Novichok&apos;: &apos;Soviet Union agents&apos;,</span><br><span class="line">        &apos;Khazari&apos;: &apos;Khazars&apos;,</span><br><span class="line">        &apos;Demonetization&apos;: &apos;demonetization&apos;,</span><br><span class="line">        &apos;demonetisation&apos;: &apos;demonetization&apos;,</span><br><span class="line">        &apos;demonitisation&apos;: &apos;demonetization&apos;,</span><br><span class="line">        &apos;demonitization&apos;: &apos;demonetization&apos;,</span><br><span class="line">        &apos;demonetisation&apos;: &apos;demonetization&apos;,</span><br><span class="line">        &apos;cryptocurrencies&apos;: &apos;cryptocurrency&apos;,</span><br><span class="line">        &apos;Hindians&apos;: &apos;North Indian who hate British&apos;,</span><br><span class="line">        &apos;vaxxer&apos;: &apos;vocal nationalist &apos;,</span><br><span class="line">        &apos;remoaner&apos;: &apos;remainer &apos;,</span><br><span class="line">        &apos;bremoaner&apos;: &apos;British remainer &apos;,</span><br><span class="line">        &apos;Jewism&apos;: &apos;Judaism&apos;,</span><br><span class="line">        &apos;Eroupian&apos;: &apos;European&apos;,</span><br><span class="line">        &apos;WMAF&apos;: &apos;White male married Asian female&apos;,</span><br><span class="line">        &apos;moeslim&apos;: &apos;Muslim&apos;,</span><br><span class="line">        &apos;cishet&apos;: &apos;cisgender and heterosexual person&apos;,</span><br><span class="line">        &apos;Eurocentric&apos;: &apos;Eurocentrism &apos;,</span><br><span class="line">        &apos;Jewdar&apos;: &apos;Jew dar&apos;,</span><br><span class="line">        &apos;Asifa&apos;: &apos;abduction, rape, murder case &apos;,</span><br><span class="line">        &apos;marathis&apos;: &apos;Marathi&apos;,</span><br><span class="line">        &apos;Trumpanzees&apos;: &apos;Trump chimpanzee fool&apos;,</span><br><span class="line">        &apos;Crimean&apos;: &apos;Crimea people &apos;,</span><br><span class="line">        &apos;atrracted&apos;: &apos;attract&apos;,</span><br><span class="line">        &apos;LGBT&apos;: &apos;lesbian, gay, bisexual, transgender&apos;,</span><br><span class="line">        &apos;Boshniak&apos;: &apos;Bosniaks &apos;,</span><br><span class="line">        &apos;Myeshia&apos;: &apos;widow of Green Beret killed in Niger&apos;,</span><br><span class="line">        &apos;demcoratic&apos;: &apos;Democratic&apos;,</span><br><span class="line">        &apos;raaping&apos;: &apos;rape&apos;,</span><br><span class="line">        &apos;Dönmeh&apos;: &apos;Islam&apos;,</span><br><span class="line">        &apos;feminazism&apos;: &apos;feminism nazi&apos;,</span><br><span class="line">        &apos;langague&apos;: &apos;language&apos;,</span><br><span class="line">        &apos;Hongkongese&apos;: &apos;HongKong people&apos;,</span><br><span class="line">        &apos;hongkongese&apos;: &apos;HongKong people&apos;,</span><br><span class="line">        &apos;Kashmirians&apos;: &apos;Kashmirian&apos;,</span><br><span class="line">        &apos;Chodu&apos;: &apos;fucker&apos;,</span><br><span class="line">        &apos;penish&apos;: &apos;penis&apos;,</span><br><span class="line">        &apos;micropenis&apos;: &apos;tiny penis&apos;,</span><br><span class="line">        &apos;Madridiots&apos;: &apos;Real Madrid idiot supporters&apos;,</span><br><span class="line">        &apos;Ambedkarite&apos;: &apos;Dalit Buddhist movement &apos;,</span><br><span class="line">        &apos;ReleaseTheMemo&apos;: &apos;cry for the right and Trump supporters&apos;,</span><br><span class="line">        &apos;harrase&apos;: &apos;harass&apos;,</span><br><span class="line">        &apos;Barracoon&apos;: &apos;Black slave&apos;,</span><br><span class="line">        &apos;Castrater&apos;: &apos;castration&apos;,</span><br><span class="line">        &apos;castrater&apos;: &apos;castration&apos;,</span><br><span class="line">        &apos;Rapistan&apos;: &apos;Pakistan rapist&apos;,</span><br><span class="line">        &apos;rapistan&apos;: &apos;Pakistan rapist&apos;,</span><br><span class="line">        &apos;Turkified&apos;: &apos;Turkification&apos;,</span><br><span class="line">        &apos;turkified&apos;: &apos;Turkification&apos;,</span><br><span class="line">        &apos;Dumbassistan&apos;: &apos;dumb ass Pakistan&apos;,</span><br><span class="line">        &apos;facetards&apos;: &apos;Facebook retards&apos;,</span><br><span class="line">        &apos;rapefugees&apos;: &apos;rapist refugee&apos;,</span><br><span class="line">        &apos;superficious&apos;: &apos;superficial&apos;,</span><br><span class="line">        # extra from kagglers</span><br><span class="line">        &apos;colour&apos;: &apos;color&apos;,</span><br><span class="line">        &apos;centre&apos;: &apos;center&apos;,</span><br><span class="line">        &apos;favourite&apos;: &apos;favorite&apos;,</span><br><span class="line">        &apos;travelling&apos;: &apos;traveling&apos;,</span><br><span class="line">        &apos;counselling&apos;: &apos;counseling&apos;,</span><br><span class="line">        &apos;theatre&apos;: &apos;theater&apos;,</span><br><span class="line">        &apos;cancelled&apos;: &apos;canceled&apos;,</span><br><span class="line">        &apos;labour&apos;: &apos;labor&apos;,</span><br><span class="line">        &apos;organisation&apos;: &apos;organization&apos;,</span><br><span class="line">        &apos;wwii&apos;: &apos;world war 2&apos;,</span><br><span class="line">        &apos;citicise&apos;: &apos;criticize&apos;,</span><br><span class="line">        &apos;youtu &apos;: &apos;youtube &apos;,</span><br><span class="line">        &apos;sallary&apos;: &apos;salary&apos;,</span><br><span class="line">        &apos;Whta&apos;: &apos;What&apos;,</span><br><span class="line">        &apos;narcisist&apos;: &apos;narcissist&apos;,</span><br><span class="line">        &apos;narcissit&apos;: &apos;narcissist&apos;,</span><br><span class="line">        &apos;howdo&apos;: &apos;how do&apos;,</span><br><span class="line">        &apos;whatare&apos;: &apos;what are&apos;,</span><br><span class="line">        &apos;howcan&apos;: &apos;how can&apos;,</span><br><span class="line">        &apos;howmuch&apos;: &apos;how much&apos;,</span><br><span class="line">        &apos;howmany&apos;: &apos;how many&apos;,</span><br><span class="line">        &apos;whydo&apos;: &apos;why do&apos;,</span><br><span class="line">        &apos;doI&apos;: &apos;do I&apos;,</span><br><span class="line">        &apos;theBest&apos;: &apos;the best&apos;,</span><br><span class="line">        &apos;howdoes&apos;: &apos;how does&apos;,</span><br><span class="line">        &apos;mastrubation&apos;: &apos;masturbation&apos;,</span><br><span class="line">        &apos;mastrubate&apos;: &apos;masturbate&apos;,</span><br><span class="line">        &apos;mastrubating&apos;: &apos;masturbating&apos;,</span><br><span class="line">        &apos;pennis&apos;: &apos;penis&apos;,</span><br><span class="line">        &apos;Etherium&apos;: &apos;Ethereum&apos;,</span><br><span class="line">        &apos;bigdata&apos;: &apos;big data&apos;,</span><br><span class="line">        &apos;2k17&apos;: &apos;2017&apos;,</span><br><span class="line">        &apos;2k18&apos;: &apos;2018&apos;,</span><br><span class="line">        &apos;qouta&apos;: &apos;quota&apos;,</span><br><span class="line">        &apos;exboyfriend&apos;: &apos;ex boyfriend&apos;,</span><br><span class="line">        &apos;airhostess&apos;: &apos;air hostess&apos;,</span><br><span class="line">        &apos;whst&apos;: &apos;what&apos;,</span><br><span class="line">        &apos;watsapp&apos;: &apos;whatsapp&apos;,</span><br><span class="line">        # extra</span><br><span class="line">        &apos;bodyshame&apos;: &apos;body shaming&apos;,</span><br><span class="line">        &apos;bodyshoppers&apos;: &apos;body shopping&apos;,</span><br><span class="line">        &apos;bodycams&apos;: &apos;body cams&apos;,</span><br><span class="line">        &apos;Cananybody&apos;: &apos;Can any body&apos;,</span><br><span class="line">        &apos;deadbody&apos;: &apos;dead body&apos;,</span><br><span class="line">        &apos;deaddict&apos;: &apos;de addict&apos;,</span><br><span class="line">        &apos;Northindian&apos;: &apos;North Indian &apos;,</span><br><span class="line">        &apos;northindian&apos;: &apos;north Indian &apos;,</span><br><span class="line">        &apos;northkorea&apos;: &apos;North Korea&apos;,</span><br><span class="line">        &apos;Whykorean&apos;: &apos;Why Korean&apos;,</span><br><span class="line">        &apos;koreaboo&apos;: &apos;Korea boo &apos;,</span><br><span class="line">        &apos;Brexshit&apos;: &apos;British Exit bullshit&apos;,</span><br><span class="line">        &apos;shithole&apos;: &apos; shithole &apos;,</span><br><span class="line">        &apos;shitpost&apos;: &apos;shit post&apos;,</span><br><span class="line">        &apos;shitslam&apos;: &apos;shit Islam&apos;,</span><br><span class="line">        &apos;shitlords&apos;: &apos;shit lords&apos;,</span><br><span class="line">        &apos;Fck&apos;: &apos;Fuck&apos;,</span><br><span class="line">        &apos;fck&apos;: &apos;fuck&apos;,</span><br><span class="line">        &apos;Clickbait&apos;: &apos;click bait &apos;,</span><br><span class="line">        &apos;clickbait&apos;: &apos;click bait &apos;,</span><br><span class="line">        &apos;mailbait&apos;: &apos;mail bait&apos;,</span><br><span class="line">        &apos;healhtcare&apos;: &apos;healthcare&apos;,</span><br><span class="line">        &apos;trollbots&apos;: &apos;troll bots&apos;,</span><br><span class="line">        &apos;trollled&apos;: &apos;trolled&apos;,</span><br><span class="line">        &apos;trollimg&apos;: &apos;trolling&apos;,</span><br><span class="line">        &apos;cybertrolling&apos;: &apos;cyber trolling&apos;,</span><br><span class="line">        &apos;sickular&apos;: &apos;India sick secular &apos;,</span><br><span class="line">        &apos;suckimg&apos;: &apos;sucking&apos;,</span><br><span class="line">        &apos;Idiotism&apos;: &apos;idiotism&apos;,</span><br><span class="line">        &apos;Niggerism&apos;: &apos;Nigger&apos;,</span><br><span class="line">        &apos;Niggeriah&apos;: &apos;Nigger&apos;</span><br><span class="line">    &#125;</span><br><span class="line">    misspell_re = re.compile(&apos;(%s)&apos; % &apos;|&apos;.join(misspell_to_sub.keys()))</span><br><span class="line"></span><br><span class="line">    def _replace(match):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        reference: https://www.kaggle.com/hengzheng/attention-capsule-why-not-both-lb-0-694 # noqa</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        try:</span><br><span class="line">            word = misspell_to_sub.get(match.group(0))</span><br><span class="line">        except KeyError:</span><br><span class="line">            word = match.group(0)</span><br><span class="line">            print(&apos;!!Error: Could Not Find Key: &#123;&#125;&apos;.format(word))</span><br><span class="line">        return word</span><br><span class="line">    return misspell_re.sub(_replace, text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def spacing_misspell(text):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    &apos;deadbody&apos; -&gt; &apos;dead body&apos;</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    misspell_list = [</span><br><span class="line">        &apos;(F|f)uck&apos;,</span><br><span class="line">        &apos;Trump&apos;,</span><br><span class="line">        &apos;\W(A|a)nti&apos;,</span><br><span class="line">        &apos;(W|w)hy&apos;,</span><br><span class="line">        &apos;(W|w)hat&apos;,</span><br><span class="line">        &apos;How&apos;,</span><br><span class="line">        &apos;care\W&apos;,</span><br><span class="line">        &apos;\Wover&apos;,</span><br><span class="line">        &apos;gender&apos;,</span><br><span class="line">        &apos;people&apos;,</span><br><span class="line">    ]</span><br><span class="line">    misspell_re = re.compile(&apos;(%s)&apos; % &apos;|&apos;.join(misspell_list))</span><br><span class="line">    return misspell_re.sub(r&quot; \1 &quot;, text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def clean_latex(text):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    convert r&quot;[math]\vec&#123;x&#125; + \vec&#123;y&#125;&quot; to English</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # edge case</span><br><span class="line">    text = re.sub(r&apos;\[math\]&apos;, &apos; LaTex math &apos;, text)</span><br><span class="line">    text = re.sub(r&apos;\[\/math\]&apos;, &apos; LaTex math &apos;, text)</span><br><span class="line">    text = re.sub(r&apos;\\&apos;, &apos; LaTex &apos;, text)</span><br><span class="line"></span><br><span class="line">    pattern_to_sub = &#123;</span><br><span class="line">        r&apos;\\mathrm&apos;: &apos; LaTex math mode &apos;,</span><br><span class="line">        r&apos;\\mathbb&apos;: &apos; LaTex math mode &apos;,</span><br><span class="line">        r&apos;\\boxed&apos;: &apos; LaTex equation &apos;,</span><br><span class="line">        r&apos;\\begin&apos;: &apos; LaTex equation &apos;,</span><br><span class="line">        r&apos;\\end&apos;: &apos; LaTex equation &apos;,</span><br><span class="line">        r&apos;\\left&apos;: &apos; LaTex equation &apos;,</span><br><span class="line">        r&apos;\\right&apos;: &apos; LaTex equation &apos;,</span><br><span class="line">        r&apos;\\(over|under)brace&apos;: &apos; LaTex equation &apos;,</span><br><span class="line">        r&apos;\\text&apos;: &apos; LaTex equation &apos;,</span><br><span class="line">        r&apos;\\vec&apos;: &apos; vector &apos;,</span><br><span class="line">        r&apos;\\var&apos;: &apos; variable &apos;,</span><br><span class="line">        r&apos;\\theta&apos;: &apos; theta &apos;,</span><br><span class="line">        r&apos;\\mu&apos;: &apos; average &apos;,</span><br><span class="line">        r&apos;\\min&apos;: &apos; minimum &apos;,</span><br><span class="line">        r&apos;\\max&apos;: &apos; maximum &apos;,</span><br><span class="line">        r&apos;\\sum&apos;: &apos; + &apos;,</span><br><span class="line">        r&apos;\\times&apos;: &apos; * &apos;,</span><br><span class="line">        r&apos;\\cdot&apos;: &apos; * &apos;,</span><br><span class="line">        r&apos;\\hat&apos;: &apos; ^ &apos;,</span><br><span class="line">        r&apos;\\frac&apos;: &apos; / &apos;,</span><br><span class="line">        r&apos;\\div&apos;: &apos; / &apos;,</span><br><span class="line">        r&apos;\\sin&apos;: &apos; Sine &apos;,</span><br><span class="line">        r&apos;\\cos&apos;: &apos; Cosine &apos;,</span><br><span class="line">        r&apos;\\tan&apos;: &apos; Tangent &apos;,</span><br><span class="line">        r&apos;\\infty&apos;: &apos; infinity &apos;,</span><br><span class="line">        r&apos;\\int&apos;: &apos; integer &apos;,</span><br><span class="line">        r&apos;\\in&apos;: &apos; in &apos;,</span><br><span class="line">    &#125;</span><br><span class="line">    # post process for look up</span><br><span class="line">    pattern_dict = &#123;k.strip(&apos;\\&apos;): v for k, v in pattern_to_sub.items()&#125;</span><br><span class="line">    # init re</span><br><span class="line">    patterns = pattern_to_sub.keys()</span><br><span class="line">    pattern_re = re.compile(&apos;(%s)&apos; % &apos;|&apos;.join(patterns))</span><br><span class="line"></span><br><span class="line">    def _replace(match):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        reference: https://www.kaggle.com/hengzheng/attention-capsule-why-not-both-lb-0-694 # noqa</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        try:</span><br><span class="line">            word = pattern_dict.get(match.group(0).strip(&apos;\\&apos;))</span><br><span class="line">        except KeyError:</span><br><span class="line">            word = match.group(0)</span><br><span class="line">            print(&apos;!!Error: Could Not Find Key: &#123;&#125;&apos;.format(word))</span><br><span class="line">        return word</span><br><span class="line">    return pattern_re.sub(_replace, text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def normalize_unicode(text):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    unicode string normalization</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    return unicodedata.normalize(&apos;NFKD&apos;, text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def remove_newline(text):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    remove \n and  \t</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    text = re.sub(&apos;\n&apos;, &apos; &apos;, text)</span><br><span class="line">    text = re.sub(&apos;\t&apos;, &apos; &apos;, text)</span><br><span class="line">    text = re.sub(&apos;\b&apos;, &apos; &apos;, text)</span><br><span class="line">    text = re.sub(&apos;\r&apos;, &apos; &apos;, text)</span><br><span class="line">    return text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def decontracted(text):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    de-contract the contraction</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # specific</span><br><span class="line">    text = re.sub(r&quot;(W|w)on(\&apos;|\’)t&quot;, &quot;will not&quot;, text)</span><br><span class="line">    text = re.sub(r&quot;(C|c)an(\&apos;|\’)t&quot;, &quot;can not&quot;, text)</span><br><span class="line">    text = re.sub(r&quot;(Y|y)(\&apos;|\’)all&quot;, &quot;you all&quot;, text)</span><br><span class="line">    text = re.sub(r&quot;(Y|y)a(\&apos;|\’)ll&quot;, &quot;you all&quot;, text)</span><br><span class="line"></span><br><span class="line">    # general</span><br><span class="line">    text = re.sub(r&quot;(I|i)(\&apos;|\’)m&quot;, &quot;i am&quot;, text)</span><br><span class="line">    text = re.sub(r&quot;(A|a)in(\&apos;|\’)t&quot;, &quot;is not&quot;, text)</span><br><span class="line">    text = re.sub(r&quot;n(\&apos;|\’)t&quot;, &quot; not&quot;, text)</span><br><span class="line">    text = re.sub(r&quot;(\&apos;|\’)re&quot;, &quot; are&quot;, text)</span><br><span class="line">    text = re.sub(r&quot;(\&apos;|\’)s&quot;, &quot; is&quot;, text)</span><br><span class="line">    text = re.sub(r&quot;(\&apos;|\’)d&quot;, &quot; would&quot;, text)</span><br><span class="line">    text = re.sub(r&quot;(\&apos;|\’)ll&quot;, &quot; will&quot;, text)</span><br><span class="line">    text = re.sub(r&quot;(\&apos;|\’)t&quot;, &quot; not&quot;, text)</span><br><span class="line">    text = re.sub(r&quot;(\&apos;|\’)ve&quot;, &quot; have&quot;, text)</span><br><span class="line">    return text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def spacing_punctuation(text):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    add space before and after punctuation and symbols</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    regular_punct = list(string.punctuation)</span><br><span class="line">    extra_punct = [</span><br><span class="line">        &apos;,&apos;, &apos;.&apos;, &apos;&quot;&apos;, &apos;:&apos;, &apos;)&apos;, &apos;(&apos;, &apos;-&apos;, &apos;!&apos;, &apos;?&apos;, &apos;|&apos;, &apos;;&apos;, &quot;&apos;&quot;, &apos;$&apos;, &apos;&amp;&apos;,</span><br><span class="line">        &apos;/&apos;, &apos;[&apos;, &apos;]&apos;, &apos;&gt;&apos;, &apos;%&apos;, &apos;=&apos;, &apos;#&apos;, &apos;*&apos;, &apos;+&apos;, &apos;\\&apos;, &apos;•&apos;,  &apos;~&apos;, &apos;@&apos;, &apos;£&apos;,</span><br><span class="line">        &apos;·&apos;, &apos;_&apos;, &apos;&#123;&apos;, &apos;&#125;&apos;, &apos;©&apos;, &apos;^&apos;, &apos;®&apos;, &apos;`&apos;,  &apos;&lt;&apos;, &apos;→&apos;, &apos;°&apos;, &apos;€&apos;, &apos;™&apos;, &apos;›&apos;,</span><br><span class="line">        &apos;♥&apos;, &apos;←&apos;, &apos;×&apos;, &apos;§&apos;, &apos;″&apos;, &apos;′&apos;, &apos;Â&apos;, &apos;█&apos;, &apos;½&apos;, &apos;à&apos;, &apos;…&apos;, &apos;“&apos;, &apos;★&apos;, &apos;”&apos;,</span><br><span class="line">        &apos;–&apos;, &apos;●&apos;, &apos;â&apos;, &apos;►&apos;, &apos;−&apos;, &apos;¢&apos;, &apos;²&apos;, &apos;¬&apos;, &apos;░&apos;, &apos;¶&apos;, &apos;↑&apos;, &apos;±&apos;, &apos;¿&apos;, &apos;▾&apos;,</span><br><span class="line">        &apos;═&apos;, &apos;¦&apos;, &apos;║&apos;, &apos;―&apos;, &apos;¥&apos;, &apos;▓&apos;, &apos;—&apos;, &apos;‹&apos;, &apos;─&apos;, &apos;▒&apos;, &apos;：&apos;, &apos;¼&apos;, &apos;⊕&apos;, &apos;▼&apos;,</span><br><span class="line">        &apos;▪&apos;, &apos;†&apos;, &apos;■&apos;, &apos;’&apos;, &apos;▀&apos;, &apos;¨&apos;, &apos;▄&apos;, &apos;♫&apos;, &apos;☆&apos;, &apos;é&apos;, &apos;¯&apos;, &apos;♦&apos;, &apos;¤&apos;, &apos;▲&apos;,</span><br><span class="line">        &apos;è&apos;, &apos;¸&apos;, &apos;¾&apos;, &apos;Ã&apos;, &apos;⋅&apos;, &apos;‘&apos;, &apos;∞&apos;, &apos;∙&apos;, &apos;）&apos;, &apos;↓&apos;, &apos;、&apos;, &apos;│&apos;, &apos;（&apos;, &apos;»&apos;,</span><br><span class="line">        &apos;，&apos;, &apos;♪&apos;, &apos;╩&apos;, &apos;╚&apos;, &apos;³&apos;, &apos;・&apos;, &apos;╦&apos;, &apos;╣&apos;, &apos;╔&apos;, &apos;╗&apos;, &apos;▬&apos;, &apos;❤&apos;, &apos;ï&apos;, &apos;Ø&apos;,</span><br><span class="line">        &apos;¹&apos;, &apos;≤&apos;, &apos;‡&apos;, &apos;√&apos;, &apos;«&apos;, &apos;»&apos;, &apos;´&apos;, &apos;º&apos;, &apos;¾&apos;, &apos;¡&apos;, &apos;§&apos;, &apos;£&apos;, &apos;₤&apos;]</span><br><span class="line">    all_punct = &apos;&apos;.join(sorted(list(set(regular_punct + extra_punct))))</span><br><span class="line">    re_tok = re.compile(f&apos;([&#123;all_punct&#125;])&apos;)</span><br><span class="line">    return re_tok.sub(r&apos; \1 &apos;, text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def spacing_digit(text):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    add space before and after digits</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    re_tok = re.compile(&apos;([0-9])&apos;)</span><br><span class="line">    return re_tok.sub(r&apos; \1 &apos;, text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def spacing_number(text):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    add space before and after numbers</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    re_tok = re.compile(&apos;([0-9]&#123;1,&#125;)&apos;)</span><br><span class="line">    return re_tok.sub(r&apos; \1 &apos;, text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def remove_number(text):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    numbers are not toxic</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    return re.sub(&apos;\d+&apos;, &apos; &apos;, text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def remove_space(text):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    remove extra spaces and ending space if any</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    text = re.sub(&apos;\s+&apos;, &apos; &apos;, text)</span><br><span class="line">    text = re.sub(&apos;\s+$&apos;, &apos;&apos;, text)</span><br><span class="line">    return text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">tokenizer</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def preprocess(text, remove_num=True):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    preprocess text into clean text for tokenization</span><br><span class="line"></span><br><span class="line">    NOTE:</span><br><span class="line">        1. glove supports uppper case words</span><br><span class="line">        2. glove supports digit</span><br><span class="line">        3. glove supports punctuation</span><br><span class="line">        5. glove supports domains e.g. www.apple.com</span><br><span class="line">        6. glove supports misspelled words e.g. FUCKKK</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # # 1. normalize</span><br><span class="line">    # text = normalize_unicode(text)</span><br><span class="line">    # # 2. remove new line</span><br><span class="line">    # text = remove_newline(text)</span><br><span class="line">    # 3. de-contract</span><br><span class="line">    text = decontracted(text)</span><br><span class="line">    # 4. clean misspell</span><br><span class="line">    text = clean_misspell(text)</span><br><span class="line">    # 5. space misspell</span><br><span class="line">    text = spacing_misspell(text)</span><br><span class="line">    # 6. clean_latex</span><br><span class="line">    text = clean_latex(text)</span><br><span class="line">    # 7. space</span><br><span class="line">    text = spacing_punctuation(text)</span><br><span class="line">    # 8. handle number</span><br><span class="line">    if remove_num:</span><br><span class="line">        text = remove_number(text)</span><br><span class="line">    else:</span><br><span class="line">        text = spacing_digit(text)</span><br><span class="line">    # 9. remove space</span><br><span class="line">    text = remove_space(text)</span><br><span class="line">    return text</span><br></pre></td></tr></table></figure>
<p>调用<strong>preprocess(text)</strong> 就好，返回处理完后的文本</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">CinKate</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://renxingkai.github.io/2019/03/30/textpreprocess/">http://renxingkai.github.io/2019/03/30/textpreprocess/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/文本预处理/">文本预处理</a></div><div class="social-share pull-right" data-disabled="google,facebook"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/04/03/rbidaf/"><i class="fa fa-chevron-left">  </i><span>《基于BiDAF多文档重排序的阅读理解模型》论文阅读</span></a></div><div class="next-post pull-right"><a href="/2019/03/29/nltk-postag/"><span>nltk---词性标注</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(http://p17.qhimg.com/d/_open360/fengjing0403/21.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2021 By CinKate</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://renxingkai.github.io">blog</a>!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>